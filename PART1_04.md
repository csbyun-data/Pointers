## 1.4 μ΄μ¤‘ ν¬μΈν„° μ΄ν•΄  
μ΄μ¤‘ ν¬μΈν„°(Double Pointer)λ” ν¬μΈν„°λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°μ…λ‹λ‹¤.  
μ¦‰, ν¬μΈν„°μ μ£Όμ†λ¥Ό μ €μ¥ν•λ” ν¬μΈν„°μ…λ‹λ‹¤.
| κ°λ…     | μ„¤λ…                          |
| ------ | --------------------------- |
| μ΄μ¤‘ ν¬μΈν„° | ν¬μΈν„°λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„° (`int **pp`)  |
| μ°Έμ΅° κΉμ΄  | `**pp` β†’ `*p` β†’ `λ³€μκ°’`       |
| λ©”λ¨λ¦¬ κµ¬μ΅° | λ³€μ β†’ ν¬μΈν„° β†’ μ΄μ¤‘ ν¬μΈν„° μμΌλ΅ μ£Όμ† μ°Έμ΅° |

```c
int num = 10;
int *p = &num;
int **pp = &p;
```

### 1.4.1 μ™ μ΄μ¤‘ ν¬μΈν„°κ°€ ν•„μ”ν• κΉ?
μ΄μ¤‘ ν¬μΈν„°λ” λ‹¤μκ³Ό κ°™μ€ μƒν™©μ—μ„ μ μ©ν•©λ‹λ‹¤:
> μ΄μ¤‘ ν¬μΈν„°λ” ν¬μΈν„°μ μ£Όμ†λ¥Ό μ§μ ‘ λ‹¤λ£¨κΈ° λ•λ¬Έμ—, λ‹¨μν• κ°’ λ³€κ²½λΏ μ•„λ‹λΌ  
> ν¬μΈν„° μμ²΄λ¥Ό μƒλ΅μ΄ λ©”λ¨λ¦¬λ΅ λ³€κ²½ν•  μ μμµλ‹λ‹¤.

| μ‚¬μ© μƒν™©            | μ„¤λ…                                                  |
| ---------------- | --------------------------------------------------- |
| ν•¨μμ—μ„ ν¬μΈν„° κ°’ λ³€κ²½  | μ΄μ¤‘ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•λ©΄ ν•¨μ λ‚΄μ—μ„ ν¬μΈν„° μμ²΄λ¥Ό μμ • κ°€λ¥                   |
| λ™μ  2μ°¨μ› λ°°μ—΄ μ²λ¦¬   | `int **matrix` λ°©μ‹μΌλ΅ ν–‰ λ‹¨μ„ λ©”λ¨λ¦¬ ν• λ‹Ή                     |
| ν¬μΈν„° λ°°μ—΄ μ²λ¦¬      | λ¬Έμμ—΄ λ°°μ—΄, λ…λ Ήν–‰ μΈμ μ²λ¦¬ (`char *argv[]` == `char **argv`) |
| λ‹¤μ°¨μ› λ°°μ—΄ λ° κµ¬μ΅° μ²λ¦¬ | λ‹¤μ°¨μ› κµ¬μ΅°μ²΄/λ°°μ—΄ λ“±μ„ λ™μ μΌλ΅ κµ¬μ„± κ°€λ¥                            |

```c
#include <stdio.h>

// char *argv[] β†’ char **argvλ΅ μ»΄νμΌλ¬κ°€ λ³€ν™ν•¨
int main(int argc, char **argv) {
    printf("ν”„λ΅κ·Έλ¨ μ΄λ¦„: %s\n", argv[0]);

    for (int i = 1; i < argc; i++) {
        printf("μΈμ %d: %s\n", i, argv[i]);
    }

    return 0;
}
```
π“ μ΄ μ½”λ“λ” μ‹¤μ  char *argv[] κ°€ char **argv λ΅ ν•΄μ„λλ‹¤λ” κ±Έ μ‹¤μµμΌλ΅ λ³΄μ—¬μ¤λ‹λ‹¤.

μμ  1: κΈ°λ³Έ κ°λ… μ΄ν•΄
```c
#include <stdio.h>

int main() {
  int num = 10;
  int *p = &num;
  int **pp = &p;

  +--------+       +--------+       +--------+
  |   pp   | --->  |   p    | --->  |  num   |
  +--------+       +--------+       +--------+
      μ£Όμ†              μ£Όμ†            κ°’: 10
  printf("num: %d\n", num);
  printf("*p: %d\n", *p);
  printf("**pp: %d\n", **pp);

  return 0;
}
```
β” μ‹¤ν–‰ κ²°κ³Ό:
```less
num: 10
*p: 10
**pp: 10
```

ν•΄μ„¤:
| λ³€μ     | μλ―Έ                |
| ------ | ----------------- |
| `p`    | `num`μ μ£Όμ†λ¥Ό μ €μ¥     |
| `pp`   | `p`μ μ£Όμ†λ¥Ό μ €μ¥       |
| `*p`   | `num`μ κ°’ (10)     |
| `**pp` | `*p` β†’ `num` β†’ 10 |

μμ  2: λ‹¨μΌ ν¬μΈν„° μ „λ‹¬ (μ£Όμ† λ³€κ²½λμ§€ μ•μ)
* ν¬μΈν„°λ” κ°’μ— μν• μ „λ‹¬(pass by value) μ΄λ―€λ΅, ν•¨μ λ‚΄μ—μ„ ν¬μΈν„° μμ²΄λ¥Ό λ°”κΎΈλ ¤λ©΄ μ΄μ¤‘ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.
```c
#include <stdio.h>
#include <stdlib.h>

void wrong_alloc(int *p) {
  p = malloc(sizeof(int)); // μ§€μ—­ λ³€μ pλ§ λ³€κ²½λ¨
  *p = 5;
}

int main() {
  int *ptr = NULL;
  wrong_alloc(ptr); // ptrμ€ μ—¬μ „ν NULL
  printf("%p\n", ptr); // NULL μ¶λ ¥
}

// κ²°κ³Ό
// (NULL μ£Όμ† μ¶λ ¥) β†’ ν•¨μ μ•μ—μ„λ§ λ©”λ¨λ¦¬ ν• λ‹Ήλκ³  mainμ ptrμ€ μ—¬μ „ν NULL
```

μμ  3: ν•¨μμ—μ„ ν¬μΈν„° κ°’ λ³€κ²½ν•κΈ°
```c
#include <stdio.h>
#include <stdlib.h>

void correct_alloc(int **ptr) {
  *ptr = (int *)malloc(sizeof(int));
  **ptr = 42;
}

int main() {
  int *p = NULL;
  correct_alloc(&p);

  printf("ν• λ‹Ήλ κ°’: %d\n", *p);

  if (p != NULL)
    free(p);  // λ©”λ¨λ¦¬ ν•΄μ 
  return 0;
}
```
π“ ν•¨μμ—μ„ μ΄μ¤‘ ν¬μΈν„°λ¥Ό ν†µν•΄ ν¬μΈν„°μ— λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•κ³  κ°’μ„ μ„¤μ •ν•©λ‹λ‹¤.

μμ  4: λ¬Έμμ—΄ ν¬μΈν„° λ°°μ—΄
```c
#include <stdio.h>

int main() {
  const char *fruits[] = {"Apple", "Banana", "Cherry"};
  const char **pp = fruits;

  for (int i = 0; i < 3; i++) {
    printf("%s\n", *(pp + i));  // λλ” pp[i]
  }

  return 0;
}
```
μ„¤λ…:
* fruitsλ” λ¬Έμμ—΄μ„ κ°€λ¦¬ν‚¤λ” ν¬μΈν„°λ“¤μ λ°°μ—΄ β†’ char *[3]
* ppλ” const char λ°°μ—΄μ„ κ°€λ¦¬ν‚¤λ” μ΄μ¤‘ ν¬μΈν„° β†’ char **

μμ  5: μƒμ λ¬Έμλ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
```c
#include <stdio.h>
int main() {
  const char *str1 = "Hello";
  const char *str2 = "World";

  const char **pp = &str1;
  printf("%s\n", *pp);  // out: Hello

  *pp = str2;  // ppκ°€ κ°€λ¦¬ν‚¤λ” ν¬μΈν„°λ¥Ό λ³€κ²½ κ°€λ¥
  printf("%s\n", *pp);  // out: World

  // **pp = 'X'; // Error!, const char κ°’ λ³€κ²½ λ¶κ°€
  return 0;
}
```
* λ¬Έμμ—΄ λ°°μ—΄μ„ λ‹¤λ£°λ•
  const char *argv[]
* ν•¨μμ—μ„ λ¬Έμμ—΄ ν¬μΈν„°λ¥Ό μμ •ν•΄μ•Ό ν• λ•
  void func(const char **p) β†’ ν•¨μκ°€ ν¬μΈν„°λ¥Ό λ‹¤λ¥Έ λ¬Έμμ—΄λ΅ λ°”κΏ€ μ μ

μμ  6: λ™μ  2μ°¨μ› λ°°μ—΄ μƒμ„± λ° ν•΄μ 
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
  int rows = 2, cols = 3;

  int **matrix = (int **)malloc(rows * sizeof(int *));
  if (matrix == NULL) {
    printf("matrix λ©”λ¨λ¦¬ ν• λ‹Ή μ‹¤ν¨\n");
    return 1;
  }
  for (int i = 0; i < rows; i++) {
    matrix[i] = (int *)malloc(cols * sizeof(int));
    if (matrix[i] == NULL) {
      for (int j = 0; j < i; j++)
        free(matrix[j]);
      free(matrix);

      printf("matrix[%d] λ©”λ¨λ¦¬ ν• λ‹Ή μ‹¤ν¨\n", i);
      return 1;
    }
  }

  // κ°’ μ €μ¥
  for (int i = 0; i < rows; i++)
    for (int j = 0; j < cols; j++)
      matrix[i][j] = i * cols + j;

  // μ¶λ ¥
  for (int i = 0; i < rows; i++) {
    for (int j = 0; j < cols; j++) {
      printf("%d ", matrix[i][j]);
    }
    printf("\n");
  }

  // λ©”λ¨λ¦¬ ν•΄μ 
  for (int i = 0; i < rows; i++) {
    if (matrix[i] != NULL)
      free(matrix[i]);
  }
  if (matrix != NULL)
    free(matrix);

  return 0;
}
```

β οΈ μ£Όμ μ‚¬ν•­
| μ‹¤μ μμ‹                                 | μ„¤λ…                         |
| ------------------------------------- | -------------------------- |
| `*ptr = malloc(...)` μ‚¬μ© μ‹ `ptr`μ΄ NULL | ν•¨μ νΈμ¶ μ‹ μ΄μ¤‘ ν¬μΈν„°λ΅ μ£Όμ†λ¥Ό λ„κ²¨μ•Ό μ•μ „ |
| λ©”λ¨λ¦¬ λ„μ                                | `malloc`ν• ν–‰λ§λ‹¤ `free` ν•„μ”    |
| κ°„μ ‘ μ°Έμ΅° μ¤μ© (`*p` vs `**pp`)             | ν¬μΈν„° λ€μƒκ³Ό μ£Όμ† λ€μƒ νΌλ™ μ£Όμ        |


### 1.4.2 ν¬μΈν„° λ°°μ—΄ vs μ΄μ¤‘ ν¬μΈν„° μ”μ•½ λΉ„κµν‘
```c
// ν¬μΈν„° λ°°μ—΄: μ—¬λ¬ ν¬μΈν„° μ €μ¥ν•λ” λ°°μ—΄
char *arr1[3] = {"one", "two", "three"};

// μ΄μ¤‘ ν¬μΈν„°: ν¬μΈν„° ν•λ‚λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
char **ptr = arr1;
```
* ν¬μΈν„° λ°°μ—΄μ€ μ¤νƒμ— μ΅΄μ¬ν•μ§€λ§, κ° ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” λ¬Έμμ—΄μ€ ν™ λλ” μƒμ μμ—­μ— μ΅΄μ¬ν•  μ μλ‹¤.

π“ λΉ„κµ: ν¬μΈν„° λ°°μ—΄ vs μ΄μ¤‘ ν¬μΈν„°
| κµ¬λ¶„        | ν¬μΈν„° λ°°μ—΄ (`char *arr[3]`)  | μ΄μ¤‘ ν¬μΈν„° (`char **pp`)       |
| --------- | ------------------------ | -------------------------- |
| κµ¬μ΅°        | μ—¬λ¬ ν¬μΈν„°λ¥Ό μ›μ†λ΅ κ°€μ§€λ” λ°°μ—΄       | ν¬μΈν„° ν•λ‚λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°           |
| λ©”λ¨λ¦¬ ν• λ‹Ή λ°©μ‹ | λ°°μ—΄ μμ²΄λ” μ¤νƒ, λ¬Έμμ—΄μ€ ν™        | κ°€λ¦¬ν‚¤λ” λ€μƒμ΄ λ‹¤μ–‘ (λ°°μ—΄, λ™μ  ν• λ‹Ή λ“±)  |
| μ£Όμ” μ‚¬μ©μ²    | λ¬Έμμ—΄ λ¦¬μ¤νΈ, ν…μ΄λΈ”, argv λ“±     | ν•¨μ μΈμ μ „λ‹¬, 2μ°¨μ› λ°°μ—΄, ν¬μΈν„° μμ • λ“± |
| μμ‹        | `char *fruits[] = {...}` | `char **pp = fruits;`      |

### 1.4.3 λ™μ  2μ°¨μ› λ°°μ—΄(μ΄μ¤‘ ν¬μΈν„° ν™μ© ν¨ν„΄)
```c
int **make_matrix(int rows, int cols) {
  int **m = malloc(rows * sizeof(int *));
  if (m == NULL) return NULL;
  
  for (int i = 0; i < rows; i++) {
    m[i] = malloc(cols * sizeof(int));
    if (m[i] == NULL) {
       for (int j = 0; j < i; j++)
         free(m[j]);
       free(m);
       return NULL;
    }
  }
  return m;
}

//..
int **mat = make_matrix(2, 3);
mat[0][0] = 1;
```
* int (*m)[cols] λ°©μ‹(κ³ μ • ν¬κΈ° 2μ°¨μ› λ°°μ—΄ ν¬μΈν„°)κ³Όλ” λ‹¤λ¦…λ‹λ‹¤.
  μ„ μμ λ” β€κ° ν–‰μ΄ λ”°λ΅ λ™μ  ν• λ‹Ήλ λ…λ¦½ λΈ”λ΅β€μ…λ‹λ‹¤.

π“ μ”μ•½
| ν•­λ©     | ν¬μΈν„° λ°°μ—΄                   | μ΄μ¤‘ ν¬μΈν„°              |
| ------ | ------------------------ | ------------------- |
| κµ¬μ΅°     | ν¬μΈν„°λ“¤μ λ°°μ—΄                 | ν¬μΈν„°λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°       |
| μ„ μ–Έ λ°©μ‹  | `char *arr[3];`          | `char **pp;`        |
| λ©”λ¨λ¦¬ λ¨λΈ | μ¤νƒ λ°°μ—΄ (ν¬μΈν„°λ” ν™μ„ κ°€λ¦¬ν‚¬ μ μμ) | ν¬μΈν„° ν•λ‚λ¥Ό κ°€λ¦¬ν‚¤λ” κµ¬μ΅°     |
| μ‚¬μ© μ   | argv, λ¬Έμμ—΄ ν…μ΄λΈ” λ“±          | malloc ν•¨μ, ν¬μΈν„° λ³€κ²½ λ“± |

> * μ΄μ¤‘ ν¬μΈν„° (int **pp): ν¬μΈν„°λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
> * ν¬μΈν„° μμ²΄λ¥Ό μμ •ν•κ³  μ‹¶μ„ λ• (ν•¨μ λ‚΄ ν¬μΈν„° μμ •)
> * ν¬μΈν„° λ°°μ—΄ μ²λ¦¬
> * λ¬Έμμ—΄ λ°°μ—΄μ΄λ‚ argv μ²λ¦¬ μ‹μ—λ„ μ‚¬μ©.
  
β… μ—°μµ λ¬Έμ 

1. λ‹¤μ μ½”λ“μ μ¶λ ¥ κ²°κ³Όλ”?
```c
int a = 100;
int *p = &a;
int **pp = &p;

printf("%p\n", (void*)pp);    // ppμ μ£Όμ†
printf("%p\n", *pp);   // pμ μ£Όμ† = &a
printf("%d\n", **pp);  // 100
```
π“ μ£Όμ: %pλ” μ£Όμ† μ¶λ ¥, %dλ” κ°’ μ¶λ ¥

2. μ΄μ¤‘ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•΄ 1μ°¨μ› λ™μ  λ°°μ—΄μ„ μƒμ„±ν•κ³  5κ°μ μ •μλ¥Ό μ €μ¥ν• ν›„ μ¶λ ¥ν•μ„Έμ”.
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
  int *arr = NULL;
  int **pp = &arr;

  *pp = (int *)malloc(5 * sizeof(int));
  if (*pp == NULL) {
    printf("λ©”λ¨λ¦¬ ν• λ‹Ή μ‹¤ν¨\n");
    return 1;
  }
  printf("μ£Όμ†: %p\n", (void*)*pp);

  for (int i = 0; i < 5; i++) {
    (*pp)[i] = i * 10;
  }

  for (int i = 0; i < 5; i++) {
    printf("%d ", arr[i]);  // λλ” (*pp)[i]
  }
  printf("\n");

  free(arr);
  return 0;
}
```

3. ν¬μΈν„° λ°°μ—΄κ³Ό μ΄μ¤‘ ν¬μΈν„°μ μ°¨μ΄μ μ„ λΉ„κµν•΄λ³΄μ„Έμ”.
```c
char *arr[2] = {"A", "B"};
char **pp = arr;
printf("%s %s\n", arr[0], pp[1]); // λ™μΌ μ¶λ ¥
```

