ğŸ“˜ 1.10 ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤ìˆ˜ ë°©ì§€ì™€ ì•ˆì „í•œ í¬ì¸í„° ì‚¬ìš©

ë™ì  ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ë°˜ë“œì‹œ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì´ ì¥ì—ì„œëŠ” C ì–¸ì–´ì—ì„œ ë°œìƒí•˜ê¸° ì‰¬ìš´ ë©”ëª¨ë¦¬ ê´€ë ¨ ì‹¤ìˆ˜ë¥¼ ì •ë¦¬í•˜ê³ , ì´ë¥¼ ë°©ì§€í•˜ëŠ” ì‹¤ì²œ ë°©ë²•ê³¼ ì˜ˆì œë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.

âœ… 1.10.1 Null í¬ì¸í„° ì ê²€
ğŸ” ë¬¸ì œ

ë©”ëª¨ë¦¬ í• ë‹¹ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ malloc()ì€ NULLì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ í¬ì¸í„°ë¥¼ ì‚¬ìš©í•˜ë©´ Segmentation Faultê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

âœ… ì•ˆì „í•œ ì½”ë“œ
```c
int *ptr = (int *)malloc(sizeof(int) * 5);
if (ptr == NULL) {
    fprintf(stderr, "ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨\n");
    exit(1);
}
```
âœ… 1.10.2 í• ë‹¹ í›„ ì´ˆê¸°í™” ëˆ„ë½
ğŸ” ë¬¸ì œ

ë™ì  ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ë°›ì€ í›„ ê°’ì„ ì´ˆê¸°í™”í•˜ì§€ ì•Šìœ¼ë©´, **ì“°ë ˆê¸° ê°’(garbage value)**ê°€ í¬í•¨ë˜ì–´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

âœ… ì•ˆì „í•œ ì´ˆê¸°í™” ë°©ë²•
```c
// ë°©ë²• 1: ìˆ˜ë™ ì´ˆê¸°í™”
for (int i = 0; i < 5; i++) arr[i] = 0;

// ë°©ë²• 2: calloc ì‚¬ìš©
int *arr = (int *)calloc(5, sizeof(int));  // ìë™ 0 ì´ˆê¸°í™”
```

âœ… 1.10.3 í•´ì œ í›„ í¬ì¸í„° ì‚¬ìš© ê¸ˆì§€ (Dangling Pointer)
ğŸ” ë¬¸ì œ

free()ë¡œ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•œ í›„, í•´ë‹¹ í¬ì¸í„°ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ dangling pointer ì˜¤ë¥˜ ë°œìƒ.

âœ… í•´ê²° ë°©ë²•
```c
free(ptr);
ptr = NULL;  // í¬ì¸í„° ë¬´íš¨í™” â†’ ì‚¬ìš© ì‹œ ë°”ë¡œ ê°ì§€ ê°€ëŠ¥
```
âœ… 1.10.4 ì´ì¤‘ í•´ì œ ë°©ì§€
ğŸ” ë¬¸ì œ

free()ë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•˜ë©´ ì‹œìŠ¤í…œì´ ì˜ˆê¸°ì¹˜ ì•Šê²Œ ë™ì‘í•˜ê±°ë‚˜ ì¶©ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

âŒ ì˜ëª»ëœ ì˜ˆ
```c
free(ptr);
free(ptr);  // ë‘ ë²ˆì§¸ í˜¸ì¶œì€ ì˜¤ë¥˜
```
âœ… ì•ˆì „í•œ ë°©ë²•
```c
free(ptr);
ptr = NULL;
```
âœ… 1.10.5 ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
ğŸ” ë¬¸ì œ

malloc()ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í–ˆì§€ë§Œ free()í•˜ì§€ ì•Šìœ¼ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ.

âœ… ì¼ë°˜ì ì¸ í•´ê²° ë°©ë²•

í•¨ìˆ˜ ì¢…ë£Œ ì „ free() í˜¸ì¶œ

êµ¬ì¡°í™”ëœ ìì› ê´€ë¦¬ ë°©ì‹(RAII, ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° ë“±) ì‚¬ìš©

ğŸ§ª ì˜ˆì œ 1: ì´ˆê¸°í™” ëˆ„ë½ê³¼ ì´ˆê¸°í™” ëœ ë©”ëª¨ë¦¬ ë¹„êµ
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int *a = (int *)malloc(5 * sizeof(int));
    int *b = (int *)calloc(5, sizeof(int));

    printf("malloc: ");
    for (int i = 0; i < 5; i++) printf("%d ", a[i]);  // ì“°ë ˆê¸° ê°’

    printf("\ncalloc: ");
    for (int i = 0; i < 5; i++) printf("%d ", b[i]);  // 0

    free(a);
    free(b);
    return 0;
}
```
ğŸ§ª ì˜ˆì œ 2: Dangling Pointer ë°©ì§€
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int *p = (int *)malloc(sizeof(int) * 3);
    p[0] = 100;

    free(p);
    // printf("%d", p[0]);  // âŒ dangling pointer ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥

    p = NULL;  // âœ… ì•ˆì „í•˜ê²Œ ë¬´íš¨í™”
    return 0;
}
```
ğŸ§ª ì˜ˆì œ 3: ì´ì¤‘ í•´ì œ ë°©ì§€
```c
#include <stdio.h>
#include <stdlib.h>

void safe_free(int **ptr) {
    if (*ptr != NULL) {
        free(*ptr);
        *ptr = NULL;
    }
}

int main() {
    int *arr = (int *)malloc(sizeof(int) * 5);
    safe_free(&arr);
    safe_free(&arr);  // âœ… ì´ì¤‘ í•´ì œ ë°©ì§€

    return 0;
}
```
ğŸ§ª ì˜ˆì œ 4: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì˜ˆì™€ í•´ê²° ë°©ë²•
```c
// ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ ì˜ˆ
int* create_array_bad() {
    int *arr = (int *)malloc(100 * sizeof(int));
    // free(arr); âŒ ì•ˆ í•˜ë©´ ëˆ„ìˆ˜
    return arr;  // ì‚¬ìš© í›„ free()í•˜ì§€ ì•Šìœ¼ë©´ ëˆ„ìˆ˜
}

// ëˆ„ìˆ˜ í•´ê²°
int* create_array_good() {
    int *arr = (int *)malloc(100 * sizeof(int));
    if (!arr) return NULL;
    return arr;
}

int main() {
    int *data = create_array_good();
    if (data) {
        // ì‚¬ìš©
        free(data);  // âœ… ë°˜ë“œì‹œ í•´ì œ
    }
    return 0;
}
```
âœ… ìš”ì•½ ì •ë¦¬í‘œ
| ì‹¤ìˆ˜ ìœ í˜•       | ì¦ìƒ/ìœ„í—˜              | ë°©ì§€ë²•                  |
| ----------- | ------------------ | -------------------- |
| Null í¬ì¸í„° ì‚¬ìš© | Segmentation fault | `NULL` ì²´í¬ í›„ ì‚¬ìš©       |
| ì´ˆê¸°í™” ëˆ„ë½      | ì“°ë ˆê¸° ê°’ ì°¸ì¡°           | `calloc()` ë˜ëŠ” ìˆ˜ë™ ì´ˆê¸°í™” |
| í•´ì œ í›„ ì ‘ê·¼     | ì˜ˆê¸°ì¹˜ ì•Šì€ ê²°ê³¼          | `free()` í›„ `NULL` í• ë‹¹ |
| ì´ì¤‘ í•´ì œ       | í”„ë¡œê·¸ë¨ ì¶©ëŒ            | `safe_free()` í•¨ìˆ˜ ì‚¬ìš©  |
| ë©”ëª¨ë¦¬ ëˆ„ìˆ˜      | ì ì  ë©”ëª¨ë¦¬ ì†Œë¹„          | ì‚¬ìš© í›„ ë°˜ë“œì‹œ `free()`    |
